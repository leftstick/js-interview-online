ace.define("ace/ext/code_lens",["require","exports","module","ace/line_widgets","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/editor","ace/config"],(function(e,n,t){"use strict";var o=e("../line_widgets").LineWidgets,i=e("../lib/event"),r=e("../lib/lang"),s=e("../lib/dom");function a(e){var n=e.$textLayer,t=n.$lenses;t&&t.forEach((function(e){e.remove()})),n.$lenses=null}function c(e,n){var t=e&n.CHANGE_LINES||e&n.CHANGE_FULL||e&n.CHANGE_SCROLL||e&n.CHANGE_TEXT;if(t){var o=n.session,i=n.session.lineWidgets,r=n.$textLayer,c=r.$lenses;if(i){var d=n.$textLayer.$lines.cells,l=n.layerConfig,u=n.$padding;c||(c=r.$lenses=[]);for(var f=0,g=0;g<d.length;g++){var v=d[g].row,L=i[v],p=L&&L.lenses;if(p&&p.length){var h=c[f];h||(h=c[f]=s.buildDom(["div",{class:"ace_codeLens"}],n.container)),h.style.height=l.lineHeight+"px",f++;for(var m=0;m<p.length;m++){var $=h.childNodes[2*m];$||(0!=m&&h.appendChild(s.createTextNode("\xa0|\xa0")),$=s.buildDom(["a"],h)),$.textContent=p[m].title,$.lensCommand=p[m]}while(h.childNodes.length>2*m-1)h.lastChild.remove();var C=n.$cursorLayer.getPixelPosition({row:v,column:0},!0).top-l.lineHeight*L.rowsAbove-l.offset;h.style.top=C+"px";var w=n.gutterWidth,x=o.getLine(v).search(/\S|$/);-1==x&&(x=0),w+=x*l.characterWidth,w-=n.scrollLeft,h.style.paddingLeft=u+w+"px"}}while(f<c.length)c.pop().remove()}else c&&a(n)}}function d(e){if(e.lineWidgets){var n=e.widgetManager;e.lineWidgets.forEach((function(e){e&&e.lenses&&n.removeLineWidget(e)}))}}function l(e){e.codeLensProviders=[],e.renderer.on("afterRender",c),e.$codeLensClickHandler||(e.$codeLensClickHandler=function(n){var t=n.target.lensCommand;t&&e.execCommand(t.id,t.arguments)},i.addListener(e.container,"click",e.$codeLensClickHandler,e)),e.$updateLenses=function(){var t=e.session;if(t){t.widgetManager||(t.widgetManager=new o(t),t.widgetManager.attach(e));var i=e.codeLensProviders.length,r=[];e.codeLensProviders.forEach((function(e){e.provideCodeLenses(t,(function(e,n){e||(n.forEach((function(e){r.push(e)})),i--,0==i&&s())}))}))}function s(){var o=t.selection.cursor,i=t.documentToScreenRow(o);n.setLenses(t,r);var s=t.$undoManager&&t.$undoManager.$lastDelta;if(!(s&&"remove"==s.action&&s.lines.length>1)){var a=t.documentToScreenRow(o),c=e.renderer.layerConfig.lineHeight,d=t.getScrollTop()+(a-i)*c;t.setScrollTop(d)}}};var t=r.delayedCall(e.$updateLenses);e.$updateLensesOnInput=function(){t.delay(250)},e.on("input",e.$updateLensesOnInput)}function u(e){e.off("input",e.$updateLensesOnInput),e.renderer.off("afterRender",c),e.$codeLensClickHandler&&e.container.removeEventListener("click",e.$codeLensClickHandler)}n.setLenses=function(e,n){var t=Number.MAX_VALUE;d(e),n&&n.forEach((function(n){var o=n.start.row,i=n.start.column,r=e.lineWidgets&&e.lineWidgets[o];r&&r.lenses||(r=e.widgetManager.$registerLineWidget({rowCount:1,rowsAbove:1,row:o,column:i,lenses:[]})),r.lenses.push(n.command),o<t&&(t=o)})),e._emit("changeFold",{data:{start:{row:t}}})},n.registerCodeLensProvider=function(e,n){e.setOption("enableCodeLens",!0),e.codeLensProviders.push(n),e.$updateLensesOnInput()},n.clear=function(e){n.setLenses(e,null)};var f=e("../editor").Editor;e("../config").defineOptions(f.prototype,"editor",{enableCodeLens:{set:function(e){e?l(this):u(this)}}}),s.importCssString(".ace_codeLens {    position: absolute;    color: #aaa;    font-size: 88%;    background: inherit;    width: 100%;    display: flex;    align-items: flex-end;    pointer-events: none;}.ace_codeLens > a {    cursor: pointer;    pointer-events: auto;}.ace_codeLens > a:hover {    color: #0000ff;    text-decoration: underline;}.ace_dark > .ace_codeLens > a:hover {    color: #4e94ce;}","")})),function(){ace.require(["ace/ext/code_lens"],(function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)}))}();